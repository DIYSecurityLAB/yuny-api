// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  user_id       String         @id @default(uuid()) @db.Uuid
  nome          String         @db.VarChar(255)
  cpf           String         @unique @db.VarChar(11)
  email         String         @unique @db.VarChar(255)
  telefone      String         @db.VarChar(20)
  senhaHash     String         @db.VarChar(255)
  data_criacao  DateTime       @default(now()) @db.Timestamp(6)
  ultimo_login  DateTime?      @db.Timestamp(6)

  refreshTokens RefreshToken[]

  @@map("usuarios")
}

model RefreshToken {
  id            String   @id @default(uuid()) @db.Uuid
  token         String   @unique
  user_id       String   @db.Uuid
  expires_at    DateTime @db.Timestamp(6)
  created_at    DateTime @default(now()) @db.Timestamp(6)
  is_revoked    Boolean  @default(false)

  usuario Usuario @relation(fields: [user_id], references: [user_id], onDelete: Cascade)

  @@map("refresh_tokens")
}